{% extends 'hospital/doctor_base.html' %}
{% load static %}
{% block content %}

<!-- Dashboard Cards -->
<div class="container mt-4">
  <div class="row text-center">
    <!-- Appointments Card -->
    <div class="col-md-4 mb-3">
      <a href="{% url 'doctor-view-appointment' %}" class="text-decoration-none text-dark">
        <div class="card shadow-lg border-0 bg-info text-white">
          <div class="card-body">
            <h5 class="card-title">Appointments For You</h5>
            <i class="fa fa-calendar fa-2x"></i>
          </div>
        </div>
      </a>
    </div>

    <!-- Patients Card -->
    <div class="col-md-4 mb-3">
      <a href="{% url 'doctor-view-patient' %}" class="text-decoration-none text-dark">
        <div class="card shadow-lg border-0 bg-success text-white">
          <div class="card-body">
            <h5 class="card-title">Patients Under You</h5>
            <i class="fa fa-user-md fa-2x"></i>
          </div>
        </div>
      </a>
    </div>

    <!-- Discharged Patients Card -->
    <div class="col-md-4 mb-3">
      <a href="{% url 'doctor-view-discharge-patient' %}" class="text-decoration-none text-dark">
        <div class="card shadow-lg border-0 bg-warning text-white">
          <div class="card-body">
            <h5 class="card-title">Patients Discharged</h5>
            <i class="fa fa-check-circle fa-2x"></i>
          </div>
        </div>
      </a>
    </div>
  </div>
</div>

<br><br>

<!-- Recent Appointments Section -->
<div class="container mb-5">
  <div class="card shadow-lg">
    <div class="card-header bg-primary text-white text-center">
      <h5 class="mb-0">Recent Appointments For You</h5>
    </div>
    <div class="table-responsive">
      <table class="table table-striped table-hover mb-0">
        <thead class="thead-dark">
          <tr>
            <th scope="col">Patient Name</th>
            <th scope="col">Picture</th>
            <th scope="col">Description</th>
            <th scope="col">Mobile</th>
            <th scope="col">Address</th>
            <th scope="col">Date</th>
          </tr>
        </thead>
        <tbody>
          {% for appointment in appointments %}
          <tr>
            <td>{{ appointment.patient.user.get_full_name }}</td>
            <td>
          {% if appointment.patient.profile_pic %}
            <img src="{{ appointment.patient.profile_pic.url }}" alt="Profile Pic" class="img-thumbnail" style="height: 50px; width: 50px;">
          {% else %}
            <img src="{% static 'images/patient.jpg' %}" alt="Default Patient Pic" class="img-thumbnail" style="height: 50px; width: 50px;">
          {% endif %}

            </td>
            <td>{{ appointment.description }}</td>
            <td>{{ appointment.patient.mobile }}</td>
            <td>{{ appointment.patient.address }}</td>
            <td>{{ appointment.date_time|date:"M d, Y H:i" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6" class="text-center text-muted">No recent appointments found.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

{% endblock content %}
