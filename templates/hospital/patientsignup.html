{% extends "hospital/homebase.html" %}
{% load static %}
{% load widget_tweaks %}

{% block extra_css %}
<style>
  body { background-color: #e3f2fd; font-family: 'Roboto', sans-serif; }
  .signup-container { margin-top: 50px; max-width: 900px; }
  .signup-header {
    background: linear-gradient(to right, #0072ff, #8811c5);
    color: white; text-align: center; padding: 25px 0; font-size: 1.5rem;
    border-top-left-radius: 10px; border-top-right-radius: 10px;
  }
  .signup-body {
    background: white; padding: 40px; border-radius: 0 0 10px 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }
  .form-control { border-radius: 20px; }
  .btn-register { width: 100%; border-radius: 20px; margin-top: 20px; }
  .form-icon { position: absolute; top: 9px; left: 12px; color: #888; }
  .form-group { position: relative; }
  .form-group input, .form-group select { padding-left: 35px; }
  .login-link { text-align: center; margin-top: 15px; }
  .errorlist { color: red; list-style: none; padding-left: 0; margin-bottom: 0; }
</style>
{% endblock %}

{% block content %}
<div class="container signup-container">
  <div class="card">
    <div class="signup-header">
      <i class="fas fa-user-plus me-2"></i>Patient Registration
    </div>
    <div class="signup-body">
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {% if userForm.errors or patientForm.errors %}
          <div class="alert alert-danger">
            Please correct the errors below.
          </div>
        {% endif %}
        <div class="row">
          <div class="col-md-6">
            <div class="form-group mb-3">
              <i class="fas fa-user form-icon"></i>
              {% render_field userForm.first_name class="form-control" placeholder="First Name" %}
              {{ userForm.first_name.errors }}
            </div>
            <div class="form-group mb-3">
              <i class="fas fa-user-circle form-icon"></i>
              {% render_field userForm.username class="form-control" placeholder="Username" %}
              {{ userForm.username.errors }}
            </div>
            <div class="form-group mb-3">
              <i class="fas fa-envelope form-icon"></i>
              {% render_field userForm.email class="form-control" placeholder="Email (optional)" %}
              {{ userForm.email.errors }}
            </div>
            <div class="form-group mb-3">
              <i class="fas fa-map-marker-alt form-icon"></i>
              {% render_field patientForm.address class="form-control" placeholder="Address" %}
              {{ patientForm.address.errors }}
            </div>
            <div class="form-group mb-3">
              <i class="fas fa-notes-medical form-icon"></i>
              {% render_field patientForm.symptoms class="form-control" placeholder="Symptoms" %}
              {{ patientForm.symptoms.errors }}
            </div>
            <div class="form-group mb-3">
              <i class="fas fa-image form-icon"></i>
              {% render_field patientForm.profile_pic class="form-control" %}
              {{ patientForm.profile_pic.errors }}
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group mb-3">
              <i class="fas fa-user form-icon"></i>
              {% render_field userForm.last_name class="form-control" placeholder="Last Name" %}
              {{ userForm.last_name.errors }}
            </div>
            <div class="form-group mb-3">
              <i class="fas fa-lock form-icon"></i>
              {% render_field userForm.password class="form-control" placeholder="Password" %}
              {{ userForm.password.errors }}
            </div>
            <div class="form-group mb-3">
              <i class="fas fa-phone form-icon"></i>
              {% render_field patientForm.mobile class="form-control" placeholder="Phone (optional)" %}
              {{ patientForm.mobile.errors }}
            </div>
            <div class="form-group mb-3">
              <i class="fas fa-user-md form-icon"></i>
              {% render_field patientForm.assignedDoctorId class="form-control" %}
              {{ patientForm.assignedDoctorId.errors }}
            </div>
          </div>
        </div>
        <button type="submit" class="btn btn-primary btn-register">Register</button>
        <div class="login-link">
          <small>Already have an account? <a href="{% url 'patientlogin' %}">Login</a></small>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock content %}
